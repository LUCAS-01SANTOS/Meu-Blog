<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Lucas Souza Santos</title>
<link>_quarto.yml/index.html</link>
<atom:link href="_quarto.yml/index.xml" rel="self" type="application/rss+xml"/>
<description>Blog pessoal</description>
<generator>quarto-1.2.313</generator>
<lastBuildDate>Sun, 29 Jan 2023 03:00:00 GMT</lastBuildDate>
<item>
  <title>Analisando Estat√≠sticas do Ibovespa com Python</title>
  <dc:creator>Lucas Souza Santos</dc:creator>
  <link>_quarto.yml/posts/post-03/index.html</link>
  <description><![CDATA[ 




<section id="analisando-estat√≠sticas-do-ibovespa-com-python" class="level1">
<h1>Analisando Estat√≠sticas do Ibovespa com Python</h1>
<section id="introdu√ß√£o" class="level2">
<h2 class="anchored" data-anchor-id="introdu√ß√£o">Introdu√ß√£o</h2>
<p>Neste post, vamos explorar como usar o Python para obter estat√≠sticas sobre o √çndice Bovespa (Ibovespa). N√≥s veremos como usar os dados hist√≥ricos do Ibovespa para criar gr√°ficos e calcular m√©tricas como retorno.</p>
<p>O objetivo √© analisar o comportamento e a volatilidade do Ibovespa, observando seus retornos. Se os retornos di√°rios para esse per√≠odo se comportarem como uma distribui√ß√£o normal ou gaussiana, estudos de riscos e probabilidades podem ser realizados adotando a hip√≥tese da normalidade.</p>
</section>
<section id="obtendo-dados-do-ibovespa" class="level2">
<h2 class="anchored" data-anchor-id="obtendo-dados-do-ibovespa">Obtendo Dados do Ibovespa</h2>
<p>A primeira etapa √© obter os dados hist√≥ricos do Ibovespa. Esses dados podem ser baixados do site da B3 | Bovespa, mas nesse caso vamos fazer o download do Yahoo! Finance, atrav√©s da biblioteca python <strong>yfinance</strong>.</p>
<p>Como sempre gosto de fazer, vou utilizar o <a href="https://colab.research.google.com/">Google Colab</a> para fazer o c√≥digo.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># Instal√ß√£o e importa√ß√£o do yfinance</span></span>
<span id="cb1-2"><span class="op" style="color: #5E5E5E;">!</span>pip install yfinance <span class="op" style="color: #5E5E5E;">-</span>q</span>
<span id="cb1-3"><span class="im" style="color: #00769E;">import</span> yfinance <span class="im" style="color: #00769E;">as</span> yf</span></code></pre></div>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># Para plotagem dos gr√°ficos</span></span>
<span id="cb2-2"><span class="im" style="color: #00769E;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;">as</span> plt</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;"># Para as estat√≠sticas</span></span>
<span id="cb2-5"><span class="im" style="color: #00769E;">import</span> statistics <span class="im" style="color: #00769E;">as</span> st</span>
<span id="cb2-6"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb2-7"><span class="im" style="color: #00769E;">import</span> scipy.stats <span class="im" style="color: #00769E;">as</span> sci</span>
<span id="cb2-8"><span class="im" style="color: #00769E;">from</span> scipy.stats <span class="im" style="color: #00769E;">import</span> norm</span></code></pre></div>
</section>
<section id="c√°lculo-dos-retornos" class="level2">
<h2 class="anchored" data-anchor-id="c√°lculo-dos-retornos">C√°lculo dos Retornos</h2>
<p>Os dados de fechamento di√°rio do Ibovespa foram adquiridos dos √∫ltimos 10 anos (29/01/2013 √† 27/01/2023). A metodologia do calculo do retorno financeiro j√° est√° explicada no post anterior ****<a href="https://lucas-santos.netlify.app/posts/post-02/">An√°lise de Retornos Financeiros de A√ß√µes e Ibovespa com Python</a>****.</p>
<p>Com os dados em m√£os executamos as fun√ß√µes do Pandas <code>pct_change()</code> para calcular os retornos e <code>dropna()</code> para eliminar as linhas com calores nulos, ou seja, dias em que n√£o houve negocia√ß√£o na Bolsa. Os retornos s√£o salvos na vari√°vel <code>retornos_ibov</code>.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">retornos_ibov <span class="op" style="color: #5E5E5E;">=</span> ibov.pct_change().dropna()</span>
<span id="cb3-2">retornos_ibov</span></code></pre></div>
<p>O DataFrame com os retornos apresenta um total de 2478 dias de negocia√ß√£o.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-03/retornos.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Exemplo da tabela com os retornos. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
</section>
<section id="visualizando-e-analisando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="visualizando-e-analisando-os-dados">Visualizando e Analisando os Dados</h2>
<p>Agora que temos os dados, podemos come√ßar a explor√°-los usando o Python. Vamos usar a biblioteca Pandas para ler os dados e a biblioteca Matplotlib para criar gr√°ficos. Al√©m das bibliotecas Numpy, Scipy.stats e Statistics, para as an√°lises estat√≠sticas e para que possamos plotar o histograma e o QQ-plot .</p>
<section id="gr√°fico-ibovespa-di√°rio" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fico-ibovespa-di√°rio">Gr√°fico Ibovespa Di√°rio</h3>
<p>Gr√°fico de linhas com a s√©rie hist√≥rica dos pre√ßos de fechamento ajustado no √≠ndice Bovespa dos √∫ltimos 10 anos.</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">plt.subplot()</span>
<span id="cb4-2">ibov.plot(kind <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'line'</span>, </span>
<span id="cb4-3">          title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Ibovespa (dois anos)'</span>, </span>
<span id="cb4-4">          xlabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Data'</span>, </span>
<span id="cb4-5">          ylabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Ibovespa Di√°rio'</span>, </span>
<span id="cb4-6">          color<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'black'</span>,</span>
<span id="cb4-7">          figsize<span class="op" style="color: #5E5E5E;">=</span>(<span class="dv" style="color: #AD0000;">12</span>,<span class="dv" style="color: #AD0000;">6</span>))</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-03/g1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</p>
<p>Atrav√©s desta s√©rie podemos ver a crescente alta no pre√ßo do Ibovespa entre 2016 e 2020, e sua grande baixa no in√≠cio da pandemia em mar√ßo de 2020. Seu atual pre√ßo hoje est√° na casa dos 1.800.</p>
</section>
<section id="gr√°fico-retornos-di√°rios" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fico-retornos-di√°rios">Gr√°fico Retornos Di√°rios</h3>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">plt.subplot()</span>
<span id="cb5-2">retornos_ibov.plot(kind <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'line'</span>, </span>
<span id="cb5-3">          title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Ibovespa - Retorno Di√°rio (dois anos)'</span>, </span>
<span id="cb5-4">          xlabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Data'</span>, </span>
<span id="cb5-5">          ylabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Ibovespa Di√°rio'</span>, </span>
<span id="cb5-6">          color<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'black'</span>,</span>
<span id="cb5-7">          figsize<span class="op" style="color: #5E5E5E;">=</span>(<span class="dv" style="color: #AD0000;">12</span>,<span class="dv" style="color: #AD0000;">7</span>))</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-03/g2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</p>
<p>Neste gr√°fico, √© poss√≠vel perceber o volume de oscila√ß√£o dos retornos di√°rios do Ibovespa. Podemos ver alguns dias com retornos positivos ou negativos mais altos, como alguns dias em 2014, 2016, 2017 e 2020.</p>
</section>
<section id="gr√°fico-histograma-e-distribui√ß√£o-normal" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fico-histograma-e-distribui√ß√£o-normal">Gr√°fico Histograma e Distribui√ß√£o Normal</h3>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">plt.subplot()</span>
<span id="cb6-2">retornos_ibov.plot(kind <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'hist'</span>, </span>
<span id="cb6-3">                   bins<span class="op" style="color: #5E5E5E;">=</span><span class="dv" style="color: #AD0000;">50</span>, </span>
<span id="cb6-4">                   density<span class="op" style="color: #5E5E5E;">=</span><span class="va" style="color: #111111;">True</span>, </span>
<span id="cb6-5">                   title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Ibovespa - Histograma dos Retornos (dois anos)'</span>, </span>
<span id="cb6-6">                   xlabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Dias'</span>, </span>
<span id="cb6-7">                   ylabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Frequ√™ncia'</span>, </span>
<span id="cb6-8">                   color<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'blue'</span>, </span>
<span id="cb6-9">                   grid<span class="op" style="color: #5E5E5E;">=</span><span class="va" style="color: #111111;">True</span>,</span>
<span id="cb6-10">                   figsize<span class="op" style="color: #5E5E5E;">=</span>(<span class="dv" style="color: #AD0000;">12</span>,<span class="dv" style="color: #AD0000;">7</span>))</span>
<span id="cb6-11"></span>
<span id="cb6-12">xmin, xmax <span class="op" style="color: #5E5E5E;">=</span> plt.xlim()</span>
<span id="cb6-13">m√©dia <span class="op" style="color: #5E5E5E;">=</span> st.mean(retornos_ibov)</span>
<span id="cb6-14">desvio <span class="op" style="color: #5E5E5E;">=</span> st.pstdev(retornos_ibov)</span>
<span id="cb6-15">eixo_x <span class="op" style="color: #5E5E5E;">=</span> np.linspace(xmin, xmax, <span class="dv" style="color: #AD0000;">100</span>)</span>
<span id="cb6-16">eixo_y <span class="op" style="color: #5E5E5E;">=</span> norm.pdf(eixo_x, m√©dia, desvio)</span>
<span id="cb6-17">plt.plot(eixo_x, eixo_y, color<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'black'</span>)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-03/g3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</p>
<p>Neste gr√°fico, podemos ver que os retornos est√£o concentrados em torno de 0 entre -0.05 e 0.05, o que sugere que a distribui√ß√£o dos retornos do Ibovespa segue uma distribui√ß√£o de probabilidade normal, por√©m n√£o perfeitamente. A curva preta representa a distribui√ß√£o normal, com m√©dia e desvio padr√£o calculados atrav√©s das fun√ß√µes da biblioteca <code>statistics</code>. Foram utilizadas 50 classes (<code>bins=‚Äô50‚Äô</code>) para a representa√ß√£o desse histograma.</p>
<p>A comprova√ß√£o de que a distribui√ß√£o dos retornos do Ibovespa segue uma distribui√ß√£o de probabilidade normal, por√©m n√£o perfeitamente aparece no pr√≥ximo gr√°fico, o <code>QQ-plot</code>.</p>
</section>
<section id="gr√°fico-qq-plot" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fico-qq-plot">Gr√°fico QQ-plot</h3>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">plt.subplot(title<span class="op" style="color: #5E5E5E;">=</span>(<span class="st" style="color: #20794D;">'QQ-plot Ibovespa'</span>), xlabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Quantis te√≥ricos'</span>, ylabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Valores ordenados'</span>)</span>
<span id="cb7-2">sci.probplot(retornos_ibov, dist<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'norm'</span>, plot<span class="op" style="color: #5E5E5E;">=</span>plt)</span>
<span id="cb7-3">plt.show()</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-03/g4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</p>
<p>O QQ-plot mostra que apesar da maioria dos pontos seguirem a linha da distribui√ß√£o normal, existem alguns pontos fora da linha, o que indica que os retornos n√£o s√£o perfeitamente normais. Assim alguns dias tiveram retornos pr√≥ximos a -15% e alguns pr√≥ximos a 15%.</p>
<p>Portanto, podemos chamar essa distribui√ß√£o de ‚Äúcauda gorda‚Äù, poi as classes do histograma s√£o mais longas do que a previs√£o te√≥rica da curva normal, fazendo os marcadores do gr√°fico destoarem da linha de 45¬∫ nos extremos.</p>
</section>
</section>
<section id="conclus√£o" class="level2">
<h2 class="anchored" data-anchor-id="conclus√£o">Conclus√£o</h2>
<p>Neste post, vimos como usar o Python para analisar estat√≠sticas do Ibovespa. N√≥s aprendemos como obter os dados, como visualiz√°-los usando o Matplotlib e como calcular m√©tricas como retorno e volatilidade.</p>
</section>
<section id="refer√™ncias" class="level2">
<h2 class="anchored" data-anchor-id="refer√™ncias">Refer√™ncias</h2>
<p>CAETANO, M. A. L.&nbsp;<strong>Python e Mercado Financeiro</strong>: programa√ß√£o para estudantes, investidores e analistas. S√£o Paulo: Bluncher, 2011.</p>
<p><a href="https://matplotlib.org/3.5.3/api/_as_gen/matplotlib.pyplot.hist.html">matplotlib.pyplot.hist ‚Äî Documenta√ß√£o do Matplotlib 3.5.3</a></p>
<p><a href="https://pandas.pydata.org/pandas-docs/version/0.23/generated/pandas.DataFrame.plot.html">Pandas. DataFrame.plot ‚Äî documenta√ß√£o do pandas 0.23.1 (pydata.org)</a></p>


</section>
</section>

 ]]></description>
  <category>python</category>
  <category>finan√ßas</category>
  <category>bolsa de valores</category>
  <guid>_quarto.yml/posts/post-03/index.html</guid>
  <pubDate>Sun, 29 Jan 2023 03:00:00 GMT</pubDate>
  <media:content url="_quarto.yml/posts/post-03/B3.png" medium="image" type="image/png" height="83" width="144"/>
</item>
<item>
  <title>An√°lise de Retornos Financeiros de A√ß√µes e Ibovespa com Python</title>
  <dc:creator>Lucas Souza Santos</dc:creator>
  <link>_quarto.yml/posts/post-02/index.html</link>
  <description><![CDATA[ 




<section id="introdu√ß√£o" class="level2">
<h2 class="anchored" data-anchor-id="introdu√ß√£o">Introdu√ß√£o</h2>
<p>A an√°lise de retornos financeiros √© um dos principais meios de avaliar os resultados de investimentos em a√ß√µes. Neste artigo, vamos aprender como calcular e analisar os retornos financeiros de a√ß√µes e do √≠ndice Bovespa (IBOV) usando Python.</p>
<p>No post de hoje, vamos realizar uma an√°lise explorat√≥ria da s√©rie de retornos di√°rios do Ibovespa utilizando o Python.</p>
</section>
<section id="metodologia" class="level2">
<h2 class="anchored" data-anchor-id="metodologia">1. Metodologia</h2>
<p>Um site popular que fornece pre√ßos di√°rios de a√ß√µes √© o Yahoo! Finance. No entanto, se voc√™ usar os pre√ßos cotados neste site para calcular o retorno de uma a√ß√£o, dever√° ter o cuidado de usar as informa√ß√µes corretas. O Yahoo! Finance informa dois pre√ßos de fechamento de a√ß√µes, o pre√ßo de fechamento real e o fechamento ajustado (Adj Close) <em>que √© ajustado para desdobramentos de a√ß√µes e dividendos</em>.</p>
<p>Em um <strong>desdobramento de a√ß√µes (os Splits)</strong>, o n√∫mero de a√ß√µes aumenta e o pre√ßo das a√ß√µes diminui. Por exemplo, em um desdobramento de a√ß√µes 2 por 1, o n√∫mero de a√ß√µes seria dobrado, pois os acionistas receberiam 2 a√ß√µes para cada 1 a√ß√£o que possuem atualmente, e o pre√ßo das a√ß√µes seria reduzido pela metade.</p>
<p>Suponha que uma a√ß√£o esteja sendo negociada atualmente a $ 120 por a√ß√£o e passe por um desdobramento de 2 para 1. Suponha tamb√©m que o pre√ßo das a√ß√µes permane√ßa inalterado durante o dia. O pre√ßo de fechamento no Yahoo! O setor financeiro reportaria <strong>pre√ßos de $ 120 e $ 60, respectivamente</strong>, o que parece uma queda de 50% no pre√ßo das a√ß√µes. Na verdade, o retorno do acionista durante o dia foi zero porque, embora o pre√ßo das a√ß√µes tenha ca√≠do pela metade, o n√∫mero de a√ß√µes que possu√≠am dobrou. <strong>Nesse caso, o pre√ßo de fechamento ajustado seria de US$ 60 para os dois dias.</strong></p>
<p>O fechamento ajustado relatado no Yahoo! O setor financeiro tamb√©m ajusta os dividendos. Considere uma a√ß√£o que est√° sendo vendida por $ 100 no final de abril, paga um dividendo de $ 5 e tem um pre√ßo de $ 108 no final de maio. O retorno do acionista para esse per√≠odo foi (US$ 108 - US$ 100 + 5) / US$ 100 = 13%. Nesse caso, o fechamento ajustado no final de maio seria de US$ 108, enquanto o fechamento ajustado do final de abril seria de US$ 95,581, o que representa um retorno de (US$ 108 - 95,581) / US$ 95,581 = 13%.</p>
<p>√â importante tamb√©m frisar que <strong>os pre√ßos ajustados do Yahoo! n√£o s√£o exatos</strong>, pois o Yahoo! Finance relata o <em>ajuste pr√≥ximo ao centavo mais pr√≥ximo</em>. Esse arredondamento pode causar uma pequena diferen√ßa no c√°lculo do retorno. Considere o exemplo que usamos acima. Usando o pre√ßo ajustado de US$ 95,581, calcule voc√™ mesmo que o retorno √©, na verdade, 12,99%, n√£o 13%. <strong>Se voc√™ precisar de retornos totais, o fechamento ajustado fornecer√° um c√°lculo de retorno bastante preciso e muito mais f√°cil</strong>, especialmente porque o Yahoo! finance n√£o vai baixar pre√ßos e dividendos na mesma planilha. <em>No entanto, se voc√™ precisar de retornos de ganhos de capital e rendimentos de dividendos separadamente, ou retornos muito precisos, precisar√° usar o pre√ßo de fechamento e os dividendos, n√£o o fechamento ajustado.</em></p>
</section>
<section id="preparando-o-ambiente" class="level2">
<h2 class="anchored" data-anchor-id="preparando-o-ambiente">2. Preparando o ambiente</h2>
<blockquote class="blockquote">
<p>Todo o c√≥digo foi executado utilizando o <strong><a href="https://colab.research.google.com/">Google Colab</a></strong>. (Gratuito e Online) Caso for executar localmente em sua m√°quina certifique-se de instalar todas as bibliotecas antes de importa-las.</p>
</blockquote>
<p>Instala√ß√£o das bibliotecas necess√°rias:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="op" style="color: #5E5E5E;">!</span>pip install <span class="op" style="color: #5E5E5E;">-</span>q yfinance</span>
<span id="cb1-2"><span class="op" style="color: #5E5E5E;">!</span>pip install <span class="op" style="color: #5E5E5E;">-</span>q quantstats</span></code></pre></div>
<p>Importa√ß√£o das bibliotecas utilizadas:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;">import</span> yfinance <span class="im" style="color: #00769E;">as</span> yf</span>
<span id="cb2-2"><span class="im" style="color: #00769E;">import</span> pandas <span class="im" style="color: #00769E;">as</span> pd</span>
<span id="cb2-3"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb2-4"><span class="im" style="color: #00769E;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;">as</span> plt</span>
<span id="cb2-5"><span class="im" style="color: #00769E;">import</span> quantstats <span class="im" style="color: #00769E;">as</span> qs</span></code></pre></div>
</section>
<section id="retornos-mensais-do-√≠ndice-bovespa" class="level2">
<h2 class="anchored" data-anchor-id="retornos-mensais-do-√≠ndice-bovespa">3. Retornos mensais do √çndice Bovespa</h2>
<p>Primeiro, importamos os dados e criamos um DataFrame usando o Pandas. Em seguida, criamos um novo DataFrame com os retornos financeiros calculados.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">ticker_ibov <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">'^BVSP'</span>]</span>
<span id="cb3-2">periodo_ibov <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'10y'</span>  <span class="co" style="color: #5E5E5E;"># Op√ß√µes: 1d,5d,1mo,3mo,6mo,1y,2y,5y,10y,ytd,max</span></span></code></pre></div>
<p>Inicialmente criamos a vari√°vel <code>ticker_ibov</code>, onde salvaremos o ticker do √≠ndice Bovespa. E a vari√°vel <code>periodo_ibov</code>, onde salvamos o per√≠odo ou intervalo de tempo para coleta dos dados.</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">ibov <span class="op" style="color: #5E5E5E;">=</span> yf.download(ticker_ibov, period<span class="op" style="color: #5E5E5E;">=</span>periodo_ibov, rounding<span class="op" style="color: #5E5E5E;">=</span><span class="va" style="color: #111111;">True</span> )[<span class="st" style="color: #20794D;">'Adj Close'</span>]</span>
<span id="cb4-2">retornos_ibov <span class="op" style="color: #5E5E5E;">=</span> ibov.resample(<span class="st" style="color: #20794D;">'M'</span>).last().pct_change().dropna()</span>
<span id="cb4-3">qs.extend_pandas()</span>
<span id="cb4-4">retornos_ibov.plot_monthly_heatmap()</span></code></pre></div>
<p>Em seguida, salvamos na vari√°vel <code>ibov</code> o conjunto de dados de Pre√ßos Ajustados (Adj Close).</p>
<p>Com a fun√ß√£o <code>resample()</code> do Pandas, que √© um m√©todo de conveni√™ncia para convers√£o de frequ√™ncia e reamostragem de s√©ries temporais. Agruparemos os dados m√™s a m√™s. Usamos o <code>pct_change()</code> para obtermos o aumento percentual e o <code>dropna()</code> para limparmos as linhas as quais n√£o possuem pre√ßo de fechamento. O dataframe tratado √© salvo na vari√°vel <code>retornos-ibov</code>.</p>
<p><strong>O c√°lculo:</strong> Para o <strong>retorno total utilizando o fechamento ajustado</strong> √© bem simples, como segue,</p>
<p><img src="_quarto.yml/posts/post-02/formula-retorno.png" class="img-fluid"></p>
<p><em>Retorno Total = (Pre√ßo Final-Pre√ßo Inicial)/Pre√ßo Inicial</em></p>
<p>ou</p>
<p><em>Retorno Total = Pre√ßo Final/Pre√ßo Inicial-1</em></p>
<p>E √© exatamente esse calculo que √© feito com a fun√ß√£o <code>pct_change()</code>. Por fim, plotamos o nosso gr√°fico.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-02/RM-ibov.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Mapa de calor dos retornos mensais do Ibovespa nos √∫ltimos 10 anos, desde 2013. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Podemos identificar com o mapa acima que, o meses de mar√ßo de 2016 e novembro de 2020 obtiveram os maiores retornos percentuais, j√° mar√ßo de 2020 foi o m√™s com a maior baixa do √≠ndice, justificado pelo decreto da pandemia de Covid-19. O √≠ndice tem iniciado o m√™s de janeiro de 2023 no positivo, at√© o momento em que os dados foram coletados.</p>
</section>
<section id="an√°lise-dos-retornos-do-bando-do-brasil" class="level2">
<h2 class="anchored" data-anchor-id="an√°lise-dos-retornos-do-bando-do-brasil">4. An√°lise dos retornos do Bando do Brasil</h2>
<section id="obten√ß√£o-dos-dados" class="level3">
<h3 class="anchored" data-anchor-id="obten√ß√£o-dos-dados"><strong>Obten√ß√£o dos Dados</strong></h3>
<p>Aqui, repetimos o mesmo processo executado anteriormente com os dados do Ibovespa.</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">tickers <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">'BBAS3.SA'</span>,]</span>
<span id="cb5-2">periodo <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'10y'</span>  <span class="co" style="color: #5E5E5E;"># Op√ß√µes: 1d,5d,1mo,3mo,6mo,1y,2y,5y,10y,ytd,max</span></span></code></pre></div>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">prices <span class="op" style="color: #5E5E5E;">=</span> yf.download(tickers, period<span class="op" style="color: #5E5E5E;">=</span>periodo, rounding<span class="op" style="color: #5E5E5E;">=</span><span class="va" style="color: #111111;">True</span> )[[<span class="st" style="color: #20794D;">'Adj Close'</span>, <span class="st" style="color: #20794D;">'Volume'</span>]]</span>
<span id="cb6-2">prices</span></code></pre></div>
</section>
<section id="pre√ßos" class="level3">
<h3 class="anchored" data-anchor-id="pre√ßos">Pre√ßos</h3>
<p>Ao executarmos a vari√°vel prices, notaremos que ela cont√©m o seguinte DataFrame, o que j√° nos permite ter uma primeira visualiza√ß√£o dos nossos dados. Aqui al√©m dos pre√ßos, tamb√©m temos a coluna com o volume.</p>
<p><img src="_quarto.yml/posts/post-02/dataframe.png" style="width: 300px"></p>
<p>Plotagem da s√©rie temporal de <code>prices</code>:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">prices[<span class="st" style="color: #20794D;">'Adj Close'</span>].plot(kind <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'line'</span>, title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Pre√ßos Ajustados'</span>, xlabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Data'</span>, ylabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Pre√ßos'</span>)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-02/adj-close-BB.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Gr√°fico dos pre√ßos ajustados da BBAS3, √∫ltimos 10 anos. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Podemos observar que os pre√ßo das a√ß√µes do Banco do Brasil (BBAS3) tiveram um movimento de alta expressiva ao longo de 2019, seguida de uma queda tamb√©m expressiva no in√≠cio de 2020.</p>
</section>
<section id="retornos-anuais" class="level3">
<h3 class="anchored" data-anchor-id="retornos-anuais">Retornos Anuais</h3>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">retornos_anuais <span class="op" style="color: #5E5E5E;">=</span> prices[<span class="st" style="color: #20794D;">'Adj Close'</span>].resample(<span class="st" style="color: #20794D;">'Y'</span>).last().pct_change().dropna()</span>
<span id="cb8-2">retornos_anuais.index <span class="op" style="color: #5E5E5E;">=</span> retornos_anuais.index.year</span>
<span id="cb8-3">retornos_anuais.plot(kind <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'barh'</span>, title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Retornos Anuais'</span>, xlabel<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Data'</span>)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-02/retornos-anuais.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Retornos anuais BBAS3. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Os anos em que houveram retornos negativos foram 2015, 2020, 2021. Sendo 2015 o ano com <strong>maior retorno negativo</strong> e 2016 o ano com <strong>maior retorno positivo</strong>.</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">fig, (ax1, ax2) <span class="op" style="color: #5E5E5E;">=</span> plt.subplots(nrows<span class="op" style="color: #5E5E5E;">=</span><span class="dv" style="color: #AD0000;">2</span>, ncols<span class="op" style="color: #5E5E5E;">=</span><span class="dv" style="color: #AD0000;">1</span>, figsize<span class="op" style="color: #5E5E5E;">=</span>(<span class="dv" style="color: #AD0000;">14</span>,<span class="dv" style="color: #AD0000;">18</span>))</span>
<span id="cb9-2"></span>
<span id="cb9-3">prices[<span class="st" style="color: #20794D;">'Adj Close'</span>].plot(kind<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"line"</span>, ax<span class="op" style="color: #5E5E5E;">=</span>ax1)</span>
<span id="cb9-4">ax1.set_title(<span class="st" style="color: #20794D;">"Pre√ßos Ajustados BBAS3"</span>)</span>
<span id="cb9-5">ax1.set_ylabel(<span class="st" style="color: #20794D;">"Pre√ßo"</span>)</span>
<span id="cb9-6">ax1.set_xlabel(<span class="st" style="color: #20794D;">"Ano"</span>)</span>
<span id="cb9-7"></span>
<span id="cb9-8">retornos_anuais.plot(kind<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"line"</span>, ax<span class="op" style="color: #5E5E5E;">=</span>ax2)</span>
<span id="cb9-9">ax2.set_title(<span class="st" style="color: #20794D;">"Retornos Anuais BBAS3"</span>)</span>
<span id="cb9-10">ax2.set_ylabel(<span class="st" style="color: #20794D;">"Pre√ßo"</span>)</span>
<span id="cb9-11">ax2.set_xlabel(<span class="st" style="color: #20794D;">"Ano"</span>)</span>
<span id="cb9-12"></span>
<span id="cb9-13">plt.show()</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-02/pre√ßos-retornos.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Compara√ß√£o entre pre√ßo e retorno. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
</section>
<section id="estat√≠sticas-dos-retornos-anuais" class="level3">
<h3 class="anchored" data-anchor-id="estat√≠sticas-dos-retornos-anuais">Estat√≠sticas dos retornos anuais</h3>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;"># Importamos mais as seguintes bibliotecas.</span></span>
<span id="cb10-2"><span class="im" style="color: #00769E;">import</span> math</span>
<span id="cb10-3"><span class="im" style="color: #00769E;">import</span> statistics <span class="im" style="color: #00769E;">as</span> st</span></code></pre></div>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1">retornos_anuais.describe()</span></code></pre></div>
<p>O resultado da fun√ß√£o <code>describe()</code> ser√° a tabela abaixo:</p>
<table class="table">
<thead>
<tr class="header">
<th>M√©tricas</th>
<th>Valores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>M√©dia</td>
<td>0.164906</td>
</tr>
<tr class="even">
<td>Desvio Padr√£o</td>
<td>0.390533</td>
</tr>
<tr class="odd">
<td>M√≠nimo</td>
<td>-0.315050</td>
</tr>
<tr class="even">
<td>25%</td>
<td>-0.138700</td>
</tr>
<tr class="odd">
<td>50%</td>
<td>0.169748</td>
</tr>
<tr class="even">
<td>75%</td>
<td>0.269097</td>
</tr>
<tr class="odd">
<td>M√°ximo</td>
<td>0.994141</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;"># Cen√°rios otimista e pessimista para o ativo</span></span>
<span id="cb12-2">m√©dia <span class="op" style="color: #5E5E5E;">=</span> st.mean(retornos_anuais)</span>
<span id="cb12-3">desvio <span class="op" style="color: #5E5E5E;">=</span> st.pstdev(retornos_anuais)</span>
<span id="cb12-4">otimista <span class="op" style="color: #5E5E5E;">=</span> m√©dia<span class="op" style="color: #5E5E5E;">+</span><span class="dv" style="color: #AD0000;">2</span><span class="op" style="color: #5E5E5E;">*</span>desvio<span class="op" style="color: #5E5E5E;">/</span>math.sqrt(<span class="dv" style="color: #AD0000;">10</span>)</span>
<span id="cb12-5">pessimista <span class="op" style="color: #5E5E5E;">=</span> m√©dia<span class="op" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">2</span><span class="op" style="color: #5E5E5E;">*</span>desvio<span class="op" style="color: #5E5E5E;">/</span>math.sqrt(<span class="dv" style="color: #AD0000;">10</span>)</span>
<span id="cb12-6"></span>
<span id="cb12-7"><span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">"Otimista: "</span>,otimista, <span class="st" style="color: #20794D;">"Pessimista: "</span>,pessimista)</span></code></pre></div>
<p><strong>Otimista:</strong> 0.39922543479982053 (39,92%) <strong>Pessimista:</strong> -0.06941435742563054 (6,94%)</p>
</section>
<section id="retornos-mensais" class="level3">
<h3 class="anchored" data-anchor-id="retornos-mensais">Retornos Mensais</h3>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">retornos_mensais <span class="op" style="color: #5E5E5E;">=</span> prices[<span class="st" style="color: #20794D;">'Adj Close'</span>].resample(<span class="st" style="color: #20794D;">'M'</span>).last().pct_change().dropna()</span>
<span id="cb13-2">qs.extend_pandas()</span>
<span id="cb13-3">retornos_mensais.plot_monthly_heatmap()</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-02/RM-BB.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Mapa de calor dos retornos mensais do BBAS3 nos √∫ltimos 10 anos, desde 2013. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1">retornos_mensais.plot.hist(bins<span class="op" style="color: #5E5E5E;">=</span><span class="dv" style="color: #AD0000;">50</span>, title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'Histograma dos retornos mensais'</span>)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_quarto.yml/posts/post-02/hist.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Histograma dos retornos mensais do BBAS3. Fonte: Yahoo! Finance. Elabora√ß√£o: Lucas Souza Santos.</figcaption><p></p>
</figure>
</div>
<p>Podemos notar com o histograma que os retornos mais frequentes est√£o entre -10% e mais 10%.</p>
<p>Por fim, temos a plotagem das m√©dias m√≥veis do Ibovespa e BBAS3.</p>
<p><img src="_quarto.yml/posts/post-02/m√©dias-m√≥veis.png" class="img-fluid"></p>
</section>
</section>
<section id="conclus√£o" class="level2">
<h2 class="anchored" data-anchor-id="conclus√£o">Conclus√£o</h2>
<p>Neste tutorial, aprendemos como calcular e analisar os retornos financeiros de a√ß√µes e do √≠ndice Bovespa usando Python. Usamos o pacote Yfinance para baixar os dados, Pandas para calcular os retornos e o pacote Matplotlib para plotar e analisar os resultados. E que o <strong>retorno m√©dio mensal</strong> do √≠ndice Ibovespa de <strong>0,76%</strong> foi menor do que o <strong>retorno m√©dio mensal</strong> do banco do Brasil (BBAS3) de <strong>1,71%</strong>.</p>
</section>
<section id="refer√™ncias" class="level1">
<h1>Refer√™ncias</h1>
<p>CAETANO, M. A. L. Python e mercado financeiro. S√£o Paulo: Editora Blucher, 2021. E-book. ISBN 9786555062410. Dispon√≠vel em: <a href="https://integrada.minhabiblioteca.com.br/#/books/9786555062410/">https://integrada.minhabiblioteca.com.br/#/books/9786555062410/</a>. Acesso em: 25 jan. 2023.</p>
<p><a href="https://youtu.be/JOqK2EGdxbQ">Como Calcular o Pre√ßo Ajustado (Dividendos, Splits) de uma A√ß√£o</a>. Canal: Ferramentas do Investidor.</p>
<p>ROSS, S. A.; WESTERFIELD, R. W.; JAFFE, J.; et al.&nbsp;Administra√ß√£o financeira. Porto Alegre: Grupo A, 2015. 10. ed.&nbsp;E-book. ISBN 9788580554328. Dispon√≠vel em: <a href="https://integrada.minhabiblioteca.com.br/books/9788580554328">https://integrada.minhabiblioteca.com.br/books/9788580554328</a>. Acesso em: 25 jan. 2023.</p>


</section>

 ]]></description>
  <category>python</category>
  <category>finan√ßas</category>
  <category>bolsa de valores</category>
  <guid>_quarto.yml/posts/post-02/index.html</guid>
  <pubDate>Wed, 25 Jan 2023 03:00:00 GMT</pubDate>
  <media:content url="_quarto.yml/posts/post-02/python-for-finance.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Meu Primeiro Blog Post</title>
  <dc:creator>Lucas Souza Santos</dc:creator>
  <link>_quarto.yml/posts/post-01/index.html</link>
  <description><![CDATA[ 




<p>Este √© o primeiro post desse blog. Bem-vindo!üòÑ</p>
<p><img src="_quarto.yml/posts/post-01/thumbnail.jpg" class="img-fluid"></p>
<p>O objetivo desse site pessoal/blog √© servir como portf√≥lio, para documentar para mim mesmo e compartilhar com todos o que tenho aprendido. Atualmente sou graduando em Administra√ß√£o pela UFPB, e pessoalmente gosto muito de programa√ß√£o, em Python principalmente.</p>
<p>Por isso tenho buscado mesclar esses dois campus de conhecimento, aplicando a programa√ß√£o, mais especificamente a √°rea de Data Science as minhas pesquisas e projetos na gradua√ß√£o. E sua aplica√ß√£o ao mercado financeiro tem sido algo que tenho explorado mais.</p>
<p>Ent√£o fique a vontadade para aproveitar esse espa√ßo, comentar ou entar em contato.</p>



 ]]></description>
  <category>Not√≠cia</category>
  <guid>_quarto.yml/posts/post-01/index.html</guid>
  <pubDate>Fri, 13 Jan 2023 03:00:00 GMT</pubDate>
  <media:content url="_quarto.yml/posts/post-01/thumbnail.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
